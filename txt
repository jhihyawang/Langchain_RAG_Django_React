def extract_imgs(self, doc, i, image_results):
    # è™•ç†åœ–ç‰‡
    fitz_page = doc.load_page(i - 1)
    image_list = fitz_page.get_images(full=True)
    print(f"ğŸ“„ ç¬¬ {i} é æ‰¾åˆ° {len(image_list)} å¼µåœ–ç‰‡")

    for img_index, img_info in enumerate(image_list):
        xref = img_info[0]
        base_image = doc.extract_image(xref)
        image_bytes = base_image["image"]
        image_ext = base_image["ext"]

        # å°‡åœ–ç‰‡è½‰æ›ç‚º PIL åœ–åƒé€²è¡Œ OCR
        img = Image.open(io.BytesIO(image_bytes))
        img_array = np.array(img)
        ocr_result = self.reader.readtext(img_array)
        ocr_text = "\n".join([text for _, text, conf in ocr_result if conf > 0.5]) if ocr_result else ""
        print(f"OCR çµæœ: {ocr_result}")

        # å¦‚æœ OCR çµæœé•·åº¦å°æ–¼ 8 å­—ï¼Œå‰‡ä¸Ÿæ£„åœ–ç‰‡ï¼Œè·³éå„²å­˜
        if len(ocr_text) < 8:
            log(f"âš ï¸ ç¬¬ {i} é ç¬¬ {img_index + 1} å¼µåœ–ç‰‡ OCR çµæœå°‘æ–¼ 8 å­—ï¼Œå·²ç•¥é")
            continue  # è·³éé€™å¼µåœ–ç‰‡ï¼Œç›´æ¥è™•ç†ä¸‹ä¸€å¼µ

        # å„²å­˜åœ–ç‰‡
        img_name = f"page_{i}_img_{img_index + 1}.{image_ext}"
        img_path = os.path.join(self.output_dir, "images", img_name)
        with open(img_path, "wb") as f:
            f.write(image_bytes)
        print(f"åœ–ç‰‡ {img_index + 1} å·²å„²å­˜ï¼š{img_path}")

        # å¦‚æœ OCR çµæœé•·åº¦ç¬¦åˆæ¢ä»¶ï¼Œç¹¼çºŒè™•ç†åœ–ç‰‡æ‘˜è¦
        print(f"OCR çµæœ: {ocr_text}")
        prompt = "è«‹æè¿°åœ–ç‰‡å…§å®¹ï¼Œè‹¥ç‚ºåœ–è¡¨è«‹æŒ‡å‡ºé¡å‹ã€X/Yè»¸æ„ç¾©ã€è¶¨å‹¢èˆ‡é—œéµè®ŠåŒ–ï¼Œè‹¥éåœ–è¡¨è«‹æè¿°ä¸»è¦æ§‹æˆèˆ‡é‡è¦è³‡è¨Š"
        summary = self.summarize_image(img_path, prompt)
        log(f"ğŸ–¼ï¸ ç¬¬ {i} é åœ–ç‰‡æ‘˜è¦å®Œæˆï¼š[ocr]{ocr_text}\n[llm]{summary[:80]}...")

        image_results.append({
            "page": i,
            "source": img_path,
            "content": summary
        })

    return image_results
